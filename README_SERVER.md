# ðŸš€ MLX Fine-tuning Server èµ·å‹•ã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€MLXãƒ•ã‚¡ã‚¤ãƒ³ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ãƒ»åœæ­¢æ–¹æ³•ã‚’èª¬æ˜Žã—ã¾ã™ã€‚

## ðŸ“‹ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### **æŽ¨å¥¨æ–¹æ³•ï¼ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆä½¿ç”¨ï¼‰**

```bash
# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
./start_server.sh

# ã‚µãƒ¼ãƒãƒ¼åœæ­¢
./stop_server.sh
```

### **æ‰‹å‹•èµ·å‹•**

```bash
cd /Users/matsbaccano/Projects/clone/mlx-finetuning
source mlx_env/bin/activate
streamlit run app.py --server.port 8507 --server.address 0.0.0.0
```

## ðŸŒ ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•

- **ãƒ­ãƒ¼ã‚«ãƒ«**: http://localhost:8507
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: http://0.0.0.0:8507

## ðŸ› ï¸ èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ©Ÿèƒ½

### **start_server.sh**
- âœ… ä»®æƒ³ç’°å¢ƒã®å­˜åœ¨ç¢ºèª
- âœ… ä¾å­˜é–¢ä¿‚ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯ãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- âœ… ãƒãƒ¼ãƒˆç«¶åˆã®è‡ªå‹•è§£æ±º
- âœ… ã‚µãƒ¼ãƒãƒ¼ã®å®‰å…¨ãªèµ·å‹•

### **stop_server.sh**
- âœ… å®Ÿè¡Œä¸­ã®ã‚µãƒ¼ãƒãƒ¼ãƒ—ãƒ­ã‚»ã‚¹æ¤œå‡º
- âœ… å®‰å…¨ãªåœæ­¢å‡¦ç†
- âœ… å¼·åˆ¶åœæ­¢ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- âœ… ãƒãƒ¼ãƒˆè§£æ”¾ã®ç¢ºèª

## ðŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### **ä»®æƒ³ç’°å¢ƒã‚¨ãƒ©ãƒ¼**
```bash
python3 -m venv mlx_env
source mlx_env/bin/activate
pip install -r requirements.txt
pip install mlx mlx-lm
```

### **ãƒãƒ¼ãƒˆç«¶åˆã‚¨ãƒ©ãƒ¼**
```bash
# æ—¢å­˜ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
lsof -i :8507

# å¼·åˆ¶åœæ­¢
./stop_server.sh

# åˆ¥ãƒãƒ¼ãƒˆã§èµ·å‹•
streamlit run app.py --server.port 8508
```

### **ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼**
```bash
source mlx_env/bin/activate
pip install --upgrade streamlit mlx mlx-lm pandas numpy transformers
```

## ðŸ”§ ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º

### **ãƒãƒ¼ãƒˆå¤‰æ›´**
`start_server.sh` ã® `PORT=8507` ã‚’å¤‰æ›´

### **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®š**
- ãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿: `--server.address localhost`
- å…¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯: `--server.address 0.0.0.0`

### **ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰èµ·å‹•**
```bash
nohup ./start_server.sh > server.log 2>&1 &
```

## ðŸ“Š ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

- **OS**: macOS 13.0ä»¥ä¸Š
- **CPU**: Apple Silicon (M1/M2/M3/M4)
- **ãƒ¡ãƒ¢ãƒª**: 16GBä»¥ä¸ŠæŽ¨å¥¨
- **Python**: 3.11ä»¥ä¸Š
- **ãƒ‡ã‚£ã‚¹ã‚¯**: 20GBä»¥ä¸Šã®ç©ºãå®¹é‡

## ðŸ†˜ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆï¼š

1. **ãƒ­ã‚°ç¢ºèª**: `server.log` ã¾ãŸã¯ç«¯æœ«å‡ºåŠ›
2. **ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª**: `ps aux | grep streamlit`
3. **ãƒãƒ¼ãƒˆç¢ºèª**: `lsof -i :8507`
4. **ä»®æƒ³ç’°å¢ƒç¢ºèª**: `which python` (mlx_envå†…ã®Pythonã‚’æŒ‡ã—ã¦ã„ã‚‹ã‹)

## ðŸŽ¯ ä½¿ç”¨ä¾‹

```bash
# é–‹ç™ºæ™‚ã®èµ·å‹•
./start_server.sh

# ä½œæ¥­å®Œäº†å¾Œã®åœæ­¢
./stop_server.sh

# é•·æ™‚é–“ç¨¼åƒï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰
nohup ./start_server.sh > server.log 2>&1 &
tail -f server.log  # ãƒ­ã‚°ç›£è¦–
```

---

**Happy Fine-tuning! ðŸ¤–**